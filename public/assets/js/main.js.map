{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nlet listCharactersApi = [];\nlet listCharacterFavorite = [];\nconst ulElement = document.querySelector('.js_ul_list');\nconst url = 'https://api.disneyapi.dev/character?pageSize=50';\nconst ulFavorites = document.querySelector('.js_ul_favlist');\nconst searchBox = document.querySelector(\".js-search-box\");\nconst searchBtn = document.querySelector(\".js-search-button\");\n\n\n//Solicitud al servidor \nfetch(url)\n  .then(response => response.json()) \n  .then(data => {  \n    listCharactersApi = data.data;  \n    renderCharacterList(listCharactersApi); \n  })\n  .catch(error => {\n    console.error('Error', error);\n});\n\n\n//Renderizar characters\nfunction renderCharacterList(listData) {\n  ulElement.innerHTML = ''; \n\n  for (const character of listData) { \n    ulElement.innerHTML += renderCharacter(character); \n  }\n\n  addEventCharacter(); \n}\n\n//Agregar eventos click a characters y fav characters:\nfunction addEventCharacter() {\n  const divElementList = document.querySelectorAll('.js_character-list'); \n  for (const div of divElementList) {    \n    div.addEventListener('click', handleClick);  \n  }\n\n  const favoriteCharacterList = document.querySelectorAll('.js_favorite-character'); \n  for (const character of favoriteCharacterList) {\n   // character.addEventListener('click', removeFavoriteCharacter);\n  }\n}\n\n//Eliminar personaje sección favoritos\nfunction removeFavoriteCharacter(event) {\n  const id = event.currentTarget.id; //guarda el ID cuando se hace click al character\n  const indexCharacter = listCharacterFavorite.findIndex((item) => item._id === parseInt(id)); //busca la posición del ch que tiene el mismo ID que el ch seleccionado.\n\n  if (indexCharacter !== -1) { //si no da -1 (se ha encontrado el ch)\n    listCharacterFavorite.splice(indexCharacter, 1); \n    event.currentTarget.remove(); \n    checkIfFavoriteIsEmpty(id); \n\n    const originalCharacter = document.getElementById(id);\n    if (originalCharacter) {    \n      originalCharacter.classList.remove('favorite');  \n    }\n  }\n}\n\n//Pintar al HTML el character\nfunction renderCharacter(character) { \n  const isFavorite = listCharacterFavorite.some((item) => item._id === character._id); \n  const favoriteClass = isFavorite ? 'favorite' : '';  \n  const html = `\n    <div class=\"characters js_character-list ${favoriteClass}\" id=\"${character._id}\">\n      <p>Name: ${character.name}</p>\n      <img src=\"${character.imageUrl}\" alt=\"${character.name}\" />\n    </div>\n  `;\n  return html;\n}\n\n//Pintar al HTML el fav character\nfunction renderFavoriteCharacter(character) {    \n   if (!character) {                   \n    return ''; \n  }\n  const html = `\n    <div class=\"characters-container\">\n      <div class=\"characters js_favorite-character\" id=\"${character.id}\">\n        <p class=\"names\"> Name: ${character.name}</p>\n        <img src=\"${character.imageUrl}\" alt=\"${character.name}\" />\n      </div>\n    </div>\n  `;\n  return html;\n}\n\n//Funcion del evento cuando se hace click en un character\nfunction handleClick(event) {\n  const id = event.currentTarget.id;  \n  const selectedCharacter = listCharactersApi.find((item) => item._id === parseInt(id));  \n  const indexCharacter = listCharacterFavorite.findIndex((item) => item._id === parseInt(id));  //-1\n  \n  if (indexCharacter === -1) { //si da -1 : no está en favoritos\n    listCharacterFavorite.push(selectedCharacter);  //agrega el personaje a la lista de favs\n    event.currentTarget.classList.add('favorite');  //agrega clase \n    moveCharacterToFavorites(event.currentTarget); // Mover a favoritos\n  } else {\n    listCharacterFavorite.splice(indexCharacter, 1); \n    event.currentTarget.classList.remove('favorite');  \n    checkIfFavoriteIsEmpty(id); \n  }\n\n  renderFavoriteCharacter();\n}\n\n//Mover character a sección fav\nfunction moveCharacterToFavorites(characterElement) {\n  const selectedFavList = document.querySelector('.js_selected-favlist');\n  const selectedCharacterCopy = characterElement.cloneNode(true);\n  const characterId = characterElement.id;\n\n  characterElement.classList.add('favorite-original'); \n  characterElement.dataset.originalId = characterId;  \n\n  selectedFavList.appendChild(selectedCharacterCopy);\n  selectedCharacterCopy.addEventListener('click', removeFavoriteCharacter);\n\n  // Mostrar la sección de favoritos\n  let favoritesSection = document.querySelector('.js_favorites-section');\n  favoritesSection.classList.remove('hidden-section');\n}\n\n// Comprobar sección favoritos, si está vacía: ocultarla \nfunction checkIfFavoriteIsEmpty() { \n  let favoritesSection = document.querySelector('.js_favorites-section');\n  const favoriteCharacters = favoritesSection.querySelectorAll('.js_selected-favlist');\n\n  if (favoriteCharacters.length === 0) {\n    favoritesSection.classList.add('hidden-section');\n  }\n}\n\n//Add to LocalStorage\nfunction addRemoveIdIntoLocalStorage(id) {\n  const ids = JSON.parse(localStorage.getItem('characterIds')) || [];  \n\n  if (ids.includes(id)) { // Si el ID está incluido en el LS: \n    const newIds = ids.filter((item) => item !== id);  \n    localStorage.setItem('characterIds', JSON.stringify(newIds));  \n\n  } else {  // Si el ID no está incluido:\n    ids.push(id);  //se agrega al LS\n    localStorage.setItem('characterIds', JSON.stringify(ids)); \n  }\n}\n\n//Filter to search\nfunction handleClickbtn(event) {\n  event.preventDefault();\n  const searchValue = searchBox.value.toLowerCase(); \n  const characterFilter = listCharactersApi.filter((character) =>\n    character.name.toLowerCase().includes(searchValue)\n  );\n  renderCharacterList(characterFilter);\n}\n\n//Events\nsearchBtn.addEventListener(\"click\", handleClickbtn); \n\n\n"]}